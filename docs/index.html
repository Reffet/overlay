<html>
    <head>
        <meta charset="utf-8" />
        <script src="./miniparse3/js/vue.min.js"></script>
        <script src="./miniparse3/js/SPN.Functions.js"></script>
        <script src="./miniparse3/js/miniparse.js"></script>
    </head>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Bebas+Neue&display=swap');
        * {
            font-family: 'Bebas Neue', 'Meiryo', cursive;
            color: #fff;
            font-size: 12px;
            text-shadow: 
                1px 1px 0 #000, -1px -1px 0 #000,
                -1px 1px 0 #000, 1px -1px 0 #000,
                0px 1px 0 #000,  0-1px 0 #000,
                -1px 0 0 #000, 1px 0 0 #000;
            letter-spacing: 0.15em;
        }
        .player_box {
            display: flex;
            justify-content: center;
        }
        .player {
            width: 150px;
            margin: 0px 5px 0px 5px;
        }
        .name {
            line-height: 2em;
            text-align: center;
            margin: 0px 0px 5px 0px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .dps_box {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            height: 25px;
        }
        .dps_box div {
            margin: 3px 10px 0px 10px;
            z-index: 1;
        }
        .dps_box:after {
            content: "";
            position: absolute;
            top: -9px;
            left: calc(50% - 10px);
            width: 20px;
            height: 20px;
            background-repeat: no-repeat;
            background-size: 20px auto;
            z-index: 0;
        }
        .sam:after {
        	background-image: url(./job/Sam.png);
        }
        .drg:after {
        	background-image: url(./job/Drg.png);
        }
        .mnk:after {
        	background-image: url(./job/Mnk.png);
        }
        .blm:after {
        	background-image: url(./job/Blm.png);
        }
        .smn:after {
        	background-image: url(./job/Smn.png);
        }
        .rdm:after {
        	background-image: url(./job/Rdm.png);
        }
        .nin:after {
        	background-image: url(./job/Nin.png);
        }
        .brd:after {
        	background-image: url(./job/Brd.png);
        }
        .mch:after {
        	background-image: url(./job/Mch.png);
        }
        .dnc:after {
        	background-image: url(./job/Dnc.png);
        }
        .gnb:after {
        	background-image: url(./job/Gnb.png);
        }
        .drk:after {
        	background-image: url(./job/Drk.png);
        }
        .pld:after {
        	background-image: url(./job/Pld.png);
        }
        .war:after {
        	background-image: url(./job/War.png);
        }
        .whm:after {
        	background-image: url(./job/Whm.png);
        }
        .sch:after {
        	background-image: url(./job/Sch.png);
        }
        .ast:after {
        	background-image: url(./job/Ast.png);
        }
        .ltb:after {
        	background-image: url(./job/Ltb.png);
        }
        .other1:after {
        }
        .other2:after {
        }
        .dps_box:before {
            content: "";
            position: absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100%;
            transform: skewX(-30deg);
            z-index: 0;
        }
        .dps:before {
            background: rgba(248, 50, 50, 0.5);
        }
        .healer:before {
	        background: rgba(60, 101, 41, 0.5);
        }
        .tank:before {
	        background: rgba(46, 48, 141, 0.5);
        }
        .other1:before {
            background: rgba(255, 135, 55, 0.5);
        }
        .other2:before {
            background: rgba(255, 135, 55, 0.5);
        }
        .encdps:after {
            content: "dps";
            font-size: 0.7em;
            margin: 0px 0px 0px 3px;
        }
        .enchps:after {
            content: "hps";
            font-size: 0.7em;
            margin: 0px 0px 0px 3px;
        }
        .battle_info {
            margin: 5px 0px 0px 0px;
            text-align: center;
        }
        .resizeHandle:after {
            content: "";
            position: fixed;
            bottom: 0px;
            right: 0px;
            width: 16px;
            height: 16px;
            background-image: url(./handle.png);
            background-position: bottom right;
            background-repeat: no-repeat;
            box-sizing: border-box;
       }
    </style>
    <body onload="javascript:init();">
        <div class="player_box">
            <div class="player" v-for="data in combatant">
                <div class="name">{{getCharName(data)}}</div>
                <div class="{{changeJobToRole(data)}} {{getIconName(data)}} dps_box">
                    <div class="encdps">{{roundUp(data.encdps)}}</div>
                    <div class="enchps">{{roundUp(data.enchps)}}</div>
                </div>
            </div>
        </div>
        <div class="battle_info" v-if="encounter != null">{{encounter.title}}({{encounter.duration}}) / Total DPS : {{encounter.ENCDPS}} / Total HPS : {{encounter.ENCHPS}}</div>
    </body>
</html>
